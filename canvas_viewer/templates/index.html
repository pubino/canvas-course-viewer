<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Canvas Viewer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/canvas_viewer.css" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light mb-3">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">Canvas Viewer</a>
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            {% if nav.home %}<li class="nav-item"><a class="nav-link" href="/home">Home</a></li>{% endif %}
            {% if nav.syllabus %}<li class="nav-item"><a class="nav-link" href="/syllabus">Syllabus</a></li>{% endif %}
            {% if nav.announcements %}<li class="nav-item"><a class="nav-link" href="/announcements">Announcements</a></li>{% endif %}
            {% if nav.modules %}<li class="nav-item"><a class="nav-link" href="/modules">Modules</a></li>{% endif %}
            {% if nav.pages %}<li class="nav-item"><a class="nav-link" href="/pages">Pages</a></li>{% endif %}
            {% if nav.files %}<li class="nav-item"><a class="nav-link" href="/files">Files</a></li>{% endif %}
            {% if nav.quizzes %}<li class="nav-item"><a class="nav-link" href="/quizzes">Quizzes</a></li>{% endif %}
            {% if nav.discussions %}<li class="nav-item"><a class="nav-link" href="/discussions">Discussions</a></li>{% endif %}
            {% if nav.people %}<li class="nav-item"><a class="nav-link" href="/people">People</a></li>{% endif %}
          </ul>
        </div>
      </div>
    </nav>

    <main class="container">
      <div class="row">
        <section class="col-12">
          <div class="card mb-3">
            <div class="card-body d-flex">
              <div class="me-3">
                {% if metadata.image_href %}
                  <img src="/static/{{ metadata.image_href }}" alt="Course image" style="max-width:150px; height:auto;"/>
                {% endif %}
              </div>
              <div>
                <h2 class="h5">{{ metadata.title or title }}</h2>
                <p class="mb-1"><strong>Course code:</strong> {{ metadata.course_code or '—' }}</p>
                <p class="mb-1"><strong>Start:</strong> {{ metadata.start_at or '—' }} <strong>End:</strong> {{ metadata.conclude_at or '—' }}</p>
                <p class="mb-0"><strong>License:</strong> {{ metadata.license or '—' }} <strong>Storage:</strong> {{ metadata.storage_quota or '—' }}</p>
                <div class="mt-2">
                  <a class="btn btn-sm btn-outline-primary" href="/canvas-data">Canvas Data</a>
                </div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">All Assets</div>
            {% if has_external_tools %}
              <div class="card-body">
                <div class="alert alert-warning mb-0">
                  <strong>Warning:</strong> This export references external tool integrations that may host course content outside the export (e.g., LTI tools). Not all content may have been captured. Detected: {{ external_tools | join(', ') }}
                </div>
              </div>
            {% endif %}
            <div class="table-responsive">
              <table class="table table-striped table-hover mb-0">
                <thead><tr><th>Name</th><th>Path</th></tr></thead>
                <tbody>
                  {% for a in assets %}
                    <tr>
                      <td>{{ a.title or a.href }}</td>
                      <td><a href="/page/{{ a.href }}">{{ a.href }}</a></td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </section>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
